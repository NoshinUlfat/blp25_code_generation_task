<div class="leaderboard-container">
  <div class="leaderboard-title-row">
    <span class="leaderboard-title">
      Leaderboard
      <h5>Top 32 Teams of Test Phase</h5>
    </span>
    <span class="leaderboard-title-img">
      <img src="assets/images/tiger-with-trophy.png" alt="Leaderboard Icon" />
    </span>
  </div>

  <div class="leaderboard-table" role="region" aria-label="Leaderboard table">
    <table>
      <thead>
        <tr>
          <th scope="col">Rank</th>
          <th scope="col">Team Name</th>
          <th scope="col">Affiliation</th>
          <th scope="col">Score</th>
        </tr>
      </thead>
      <tbody>
        <!-- Use slice to show first 10 rows when collapsed -->
        <tr *ngFor="let team of teams | slice:0:(showAll ? teams.length : 10); let i = index">
          <td>
            <span
              class="medal"
              [ngClass]="{
                'rank-1': getRank(i) === 1,
                'rank-2': getRank(i) === 2,
                'rank-3': getRank(i) === 3,
                'rank-4': getRank(i) === 4,
                'rank-5': getRank(i) === 5,
                'rank-below-5': getRank(i) > 5
              }"
              aria-hidden="true"
            >
              {{ getRank(i) }}
            </span>
          </td>
          <td class="team-name">{{ team.teamName && team.teamName !== '""' ? team.teamName : '—' }}</td>
          <td class="affiliation">{{ team.affiliation && team.affiliation !== '""' ? team.affiliation : '—' }}</td>
          <td class="score">{{ team.score | number:'1.3-3' }}</td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="table-toggle">
    <button
      type="button"
      (click)="toggleTable()"
      class="toggle-btn"
      [attr.aria-expanded]="showAll"
      [attr.aria-label]="showAll ? 'Collapse table' : 'Expand table'"
    >
      {{ showAll ? 'Collapse table' : 'Expand table' }}
    </button>
  </div>
</div>
